# Claude Context Notes

## Build Environment

- **JAVA_HOME**: `/usr/lib/jvm/java-21-openjdk` (Java 21 required for Android builds)
- **Node**: v20+ (check with `node --version`)

## Common Commands

```bash
# Android debug build
JAVA_HOME=/usr/lib/jvm/java-21-openjdk ./android/gradlew -p android assembleDebug

# Android release build
JAVA_HOME=/usr/lib/jvm/java-21-openjdk ./android/gradlew -p android assembleRelease

# Web build + Android sync
npm run build && npx cap sync android

# Desktop build (Linux)
npm run electron:build:linux

# Desktop build (Windows)
npm run electron:build:win
```

## Release Workflow

1. Commits auf master pushen
2. Tag erstellen: `git tag v0.x.x`
3. Tag pushen: `git push origin refs/tags/v0.x.x`
4. GitHub Actions baut Android APK und Desktop Binaries

## Push Notifications

- Android: UnifiedPush mit ntfy App als Distributor
- Web/Electron: SSE mit ntfy.sh
- Push Server: https://push.sealchat.app

## Known Issues

- Desktop workflow needs `--publish always` flag for release uploads
- Android needs Kotlin 2.2.20+ for UnifiedPush connector 3.x
